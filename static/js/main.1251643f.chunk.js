(this.webpackJsonpgame=this.webpackJsonpgame||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r,c,a,s=n(1),i=n.n(s),o=n(28),l=n.n(o),u=n(9),j=n(10),b=n(14),d=n(13),h=n(56),f=n(54),O=n(55),x=n(21),m=n(22),p=n(16),v=n(0),g=m.a.div(r||(r=Object(x.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 80px;\n"]))),S=m.a.h3(c||(c=Object(x.a)(["\n    font-size: 24px;\n    color: #fff;\n    margin: 0;\n"]))),w=m.a.ul(a||(a=Object(x.a)(["\n    display: flex;\n    margin: 0;\n    align-items: center;\n    color: #fff;\n    list-style-type: none;\n    li {\n        margin-right: 20px;\n        font-size: 18px;\n    }\n"]))),k=function(){return Object(v.jsxs)(g,{children:[Object(v.jsx)(S,{children:Object(v.jsx)(p.b,{to:"/",children:"Game of Thrones DB"})}),Object(v.jsxs)(w,{children:[Object(v.jsx)("li",{children:Object(v.jsx)(p.b,{to:"/characters/",children:"Characters"})}),Object(v.jsx)("li",{children:Object(v.jsx)(p.b,{to:"/houses/",children:"Houses"})}),Object(v.jsx)("li",{children:Object(v.jsx)(p.b,{to:"/books/",children:"Books"})})]})]})},y=n(15),C=(n(44),n(45),function(){return Object(v.jsx)("div",{className:"loadingio-spinner-spin-6s8vsocvj8t",children:Object(v.jsxs)("div",{className:"ldio-04mrtysve73j",children:[Object(v.jsx)("div",{children:Object(v.jsx)("div",{})}),Object(v.jsx)("div",{children:Object(v.jsx)("div",{})}),Object(v.jsx)("div",{children:Object(v.jsx)("div",{})}),Object(v.jsx)("div",{children:Object(v.jsx)("div",{})}),Object(v.jsx)("div",{children:Object(v.jsx)("div",{})}),Object(v.jsx)("div",{children:Object(v.jsx)("div",{})}),Object(v.jsx)("div",{children:Object(v.jsx)("div",{})}),Object(v.jsx)("div",{children:Object(v.jsx)("div",{})})]})})}),I=(n(46),n.p+"static/media/error.4a53f279.jpg"),N=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("img",{src:I,alt:"error"}),Object(v.jsx)("span",{children:"Something goes wrong"})]})},R=n(5),B=n.n(R),D=n(17),_=function(){function e(){var t=this;Object(u.a)(this,e),this.getResource=function(){var e=Object(D.a)(B.a.mark((function e(n){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(n));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(n,", status: ").concat(r.status));case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllCharacters=Object(D.a)(B.a.mark((function e(){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/characters?page=5&pageSize=10");case 2:return n=e.sent,e.abrupt("return",n.map(t._transformCharacter));case 4:case"end":return e.stop()}}),e)}))),this.getCharacter=function(){var e=Object(D.a)(B.a.mark((function e(n){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/characters/".concat(n,"/"));case 2:return r=e.sent,e.abrupt("return",t._transformCharacter(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllHouses=Object(D.a)(B.a.mark((function e(){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/houses/");case 2:return n=e.sent,e.abrupt("return",n.map(t._transformHouse));case 4:case"end":return e.stop()}}),e)}))),this.getHouse=function(){var e=Object(D.a)(B.a.mark((function e(n){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/houses/".concat(n,"/"));case 2:return r=e.sent,e.abrupt("return",t._transformHouse(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllBooks=Object(D.a)(B.a.mark((function e(){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/books/");case 2:return n=e.sent,e.abrupt("return",n.map(t._transformBook));case 4:case"end":return e.stop()}}),e)}))),this.getBook=function(){var e=Object(D.a)(B.a.mark((function e(n){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/books/".concat(n,"/"));case 2:return r=e.sent,e.abrupt("return",t._transformBook(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._extractId=function(e){return e.url.match(/\/([0-9]*)$/)[1]},this._transformCharacter=function(e){return{id:t._extractId(e),name:t.isSet(e.name),gender:t.isSet(e.gender),born:t.isSet(e.born),died:t.isSet(e.died),culture:t.isSet(e.culture)}},this._transformHouse=function(e){return{id:t._extractId(e),name:t.isSet(e.name),region:t.isSet(e.region),words:t.isSet(e.words),titles:t.isSet(e.titles),ancestralWeapons:t.isSet(e.ancestralWeapons)}},this._transformBook=function(e){return{id:t._extractId(e),name:t.isSet(e.name),numberOfPages:t.isSet(e.numberOfPages),publisher:t.isSet(e.publisher),released:t.isSet(e.released)}},this._apiBase="https://www.anapioficeandfire.com/api"}return Object(j.a)(e,[{key:"isSet",value:function(e){return e||"not found"}}]),e}();var A=function(e){var t=e.char,n=t.name,r=t.gender,c=t.born,a=t.died,s=t.culture;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("h4",{children:["Random Character: ",n]}),Object(v.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(v.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[Object(v.jsx)("span",{className:"term",children:"Gender "}),Object(v.jsx)("span",{children:r})]}),Object(v.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[Object(v.jsx)("span",{className:"term",children:"Born "}),Object(v.jsx)("span",{children:c})]}),Object(v.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[Object(v.jsx)("span",{className:"term",children:"Died "}),Object(v.jsx)("span",{children:a})]}),Object(v.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[Object(v.jsx)("span",{className:"term",children:"Culture "}),Object(v.jsx)("span",{children:s})]})]})]})},H=function(){var e=Object(s.useState)({}),t=Object(y.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)(!0),a=Object(y.a)(c,2),i=a[0],o=a[1],l=Object(s.useState)(!1),u=Object(y.a)(l,2),j=u[0],b=u[1];Object(s.useEffect)((function(){h();var e=setInterval(h,4e3);return function(){clearInterval(e)}}),[]);var d=new _,h=function(){var e=Math.floor(140*Math.random()+25);d.getCharacter(e).then((function(e){r(e),o(!1)})).catch((function(){b(!0),o(!1)}))},f=j?Object(v.jsx)(N,{}):null,O=i?Object(v.jsx)(C,{}):null,x=i||j?null:Object(v.jsx)(A,{char:n});return Object(v.jsxs)("div",{className:"random-block rounded",children:[f,O,x]})};n(48);var E,W=function(e){var t=e.getData,n=e.onItemSelected,r=e.renderItem,c=Object(s.useState)(null),a=Object(y.a)(c,2),i=a[0],o=a[1];if(Object(s.useEffect)((function(){t().then((function(e){o(e)}))}),[]),!i)return Object(v.jsx)(C,{});var l=i.map((function(e){var t=e.id,c=r(e);return Object(v.jsx)("li",{className:"list-group-item",onClick:function(){return n(t)},children:c},t)}));return Object(v.jsx)("ul",{className:"item-list list-group",children:l})},P=(n(49),function(e){var t=e.item,n=e.field,r=e.label;return Object(v.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[Object(v.jsx)("span",{className:"term",children:r}),Object(v.jsx)("span",{children:t[n]})]})});var z=function(e){var t=e.itemId,n=e.getData,r=e.children,c=Object(s.useState)([]),a=Object(y.a)(c,2),o=a[0],l=a[1],u=Object(s.useState)(!0),j=Object(y.a)(u,2),b=j[0],d=j[1],h=Object(s.useState)(!1),f=Object(y.a)(h,2),O=f[0],x=f[1];function m(){console.log("error load"),d(!1),x(!0)}if(Object(s.useEffect)((function(){if(t!==E){if(!t)return;return n(t).then((function(e){l(e),d(!1),x(!1)})).catch(m),function(){E=t}}})),!t)return Object(v.jsx)("span",{className:"select-error",children:"Please select a item"});var p=o.name,g=b?Object(v.jsx)(C,{}):null,S=O?Object(v.jsx)(N,{}):null;return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:p}),Object(v.jsxs)("ul",{children:[S,g,i.a.Children.map(r,(function(e){return i.a.cloneElement(e,{item:o})}))]})]})},G=function(e){var t=e.left,n=e.right;return Object(v.jsxs)(f.a,{children:[Object(v.jsx)(O.a,{md:"6",children:t}),Object(v.jsx)(O.a,{md:"6",children:n})]})},T=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).gotService=new _,e.state={selectedChar:null,error:!1},e.onItemSelected=function(t){e.setState({selectedChar:t})},e}return Object(j.a)(n,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){if(this.state.error)return Object(v.jsx)(N,{});var e=Object(v.jsx)(W,{onItemSelected:this.onItemSelected,getData:this.gotService.getAllCharacters,renderItem:function(e){var t=e.name,n=e.gender;return"".concat(t," (").concat(n,")")}}),t=Object(v.jsxs)(z,{itemId:this.state.selectedChar,getData:this.gotService.getCharacter,children:[Object(v.jsx)(P,{field:"gender",label:"Gender"}),Object(v.jsx)(P,{field:"born",label:"Born"}),Object(v.jsx)(P,{field:"died",label:"Died"}),Object(v.jsx)(P,{field:"culture",label:"Culture"})]});return Object(v.jsx)(G,{left:e,right:t})}}]),n}(s.Component),F=n(4),J=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).gotService=new _,e.state={error:!1},e}return Object(j.a)(n,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){var e=this;return this.state.error?Object(v.jsx)(N,{}):Object(v.jsx)(W,{onItemSelected:function(t){e.props.history.push(t)},getData:this.gotService.getAllBooks,renderItem:function(e){return e.name}})}}]),n}(s.Component),M=Object(F.e)(J),$=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).gotService=new _,e.state={selectedHouse:null,error:!1},e.onItemSelected=function(t){e.setState({selectedHouse:t})},e}return Object(j.a)(n,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){if(this.state.error)return Object(v.jsx)(N,{});var e=Object(v.jsx)(W,{onItemSelected:this.onItemSelected,getData:this.gotService.getAllHouses,renderItem:function(e){return e.name}}),t=Object(v.jsxs)(z,{itemId:this.state.selectedHouse,getData:this.gotService.getHouse,children:[Object(v.jsx)(P,{field:"region",label:"Region"}),Object(v.jsx)(P,{field:"words",label:"Words"}),Object(v.jsx)(P,{field:"titles",label:"Titles"}),Object(v.jsx)(P,{field:"ancestralWeapons",label:"Ancestral Weapons"})]});return Object(v.jsx)(G,{left:e,right:t})}}]),n}(s.Component),q=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).gotService=new _,e}return Object(j.a)(n,[{key:"render",value:function(){return Object(v.jsxs)(z,{itemId:this.props.bookId,getData:this.gotService.getBook,children:[Object(v.jsx)(P,{field:"numberOfPages",label:"Number of pages"}),Object(v.jsx)(P,{field:"publisher",label:"Publisher"}),Object(v.jsx)(P,{field:"released",label:"Released"})]})}}]),n}(s.Component),K=(n(50),function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).gotService=new _,e.state={showRandomChar:!0,error:!1},e.toggleRandomChar=function(){e.setState((function(e){return{showRandomChar:!e.showRandomChar}}))},e}return Object(j.a)(n,[{key:"render",value:function(){if(this.state.error)return Object(v.jsx)(N,{});var e=this.state.showRandomChar?Object(v.jsx)(H,{}):null;return Object(v.jsx)(p.a,{children:Object(v.jsxs)("div",{className:"app",children:[Object(v.jsx)(h.a,{children:Object(v.jsx)(k,{})}),Object(v.jsxs)(h.a,{children:[Object(v.jsx)(f.a,{children:Object(v.jsxs)(O.a,{lg:{size:5,offset:0},children:[e,Object(v.jsx)("button",{className:"toggle-btn",onClick:this.toggleRandomChar,children:"Toggle random character"})]})}),Object(v.jsx)(F.a,{path:"/",exact:!0,component:function(){return Object(v.jsx)("h1",{children:"Welcome to GOT DB"})}}),Object(v.jsx)(F.a,{path:"/characters",component:T}),Object(v.jsx)(F.a,{path:"/houses",component:$}),Object(v.jsx)(F.a,{path:"/books",exact:!0,component:M}),Object(v.jsx)(F.a,{path:"/books/:id",render:function(e){var t=e.match,n=(e.location,e.history,t.params.id);return Object(v.jsx)(q,{bookId:n})}})]})]})})}}]),n}(s.Component));n(51),n(52);l.a.render(Object(v.jsx)(K,{}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.1251643f.chunk.js.map